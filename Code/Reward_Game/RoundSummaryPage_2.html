{% load otree static %}

{{ block title }} 
{{ endblock }}

{{ block script }}
<script src="{% static 'global/js/utils.js' %}"></script>
{{ endblock }}

{{ block styles}}
<link rel="stylesheet" type="text/css" href="{% static 'global/css/styles.css' %}"/>
<style>
    table {
            border-collapse: collapse;
            margin: 5px auto;
            color: #000;
        }
    th, td {
        padding: 8px;
        text-align: center;
    }
    th {
        border-bottom: 0px;
        text-align: center;
    }   
</style>
{{ endblock }}

{{ block content }}

    <div class="div-container">
        <div class="game-interface">
            <div class="left-column" style="width: 100%;">
                <div class="top" style="display: flex; flex-direction: column; align-items: left; justify-content: center; padding: 10px;">
                    <p style="color: black; font-weight: bold;">In Stage 1:</p>
                    <span style="color: #000;">From your allowance you kept: <span style="color: red;">{{remaining_balance}} MUs</span></span>
                    <span style="color: #000;">From the public fund you got: <span style="color: red;">{{split}} MUs</span></span>    
                </div>

                <div class="bottom" style="padding: 10px;">
                    <span style="color: black; font-weight: bold;">In Stage 2:</span>
                    <table>
                        <tr>
                            <th>Participant</th>
                            <th>Your action towards each</th>
                            <th>Impact on your personal account</th>
                            <th>Participant</th>
                            <th>Their action towards you</th>
                            <th>Impact on your personal account</th>
                        </tr>
                    
                        <tr>
                            <td class="icon">
                                {% if p2_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">B</span>
                                </div>
                                {% elif p2_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">B</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ player_action.0.0 }}</td>
                            <td style="color: red;">{{ player_action.0.1 }}</td>

                            <td class="icon">
                                {% if p2_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">B</span>
                                </div>
                                {% elif p2_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">B</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ other_player_action.0.0 }}</td>
                            <td style="color: red;">{{ other_player_action.0.1 }}</td>
                        </tr>

                        <tr>
                            <td class="icon">
                                {% if p3_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">C</span>
                                </div>
                                {% elif p3_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">C</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ player_action.1.0 }}</td>
                            <td style="color: red;">{{ player_action.1.1 }}</td>

                            <td class="icon">
                                {% if p3_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">C</span>
                                </div>
                                {% elif p3_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">C</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ other_player_action.1.0 }}</td>
                            <td style="color: red;">{{ other_player_action.1.1 }}</td>
                        </tr>

                        <tr>
                            <td class="icon">
                                {% if p4_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">D</span>
                                </div>
                                {% elif p4_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">D</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ player_action.2.0 }}</td>
                            <td style="color: red;">{{ player_action.2.1 }}</td>

                            <td class="icon">
                                {% if p4_role == 'human' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/human-bw.png' %}"/>
                                    <span class="table-letter-label">D</span>
                                </div>
                                {% elif p4_role == 'bot' %}
                                <div class="table-role">
                                    <img src="{% static 'global/imgs/Baseline/bot-bw.png' %}"/>
                                    <span class="table-letter-label" style="top:45%;">D</span>
                                </div>
                                {% endif %}
                            </td>
                            <td class="contribution">{{ other_player_action.2.0 }}</td>
                            <td style="color: red;">{{ other_player_action.2.1 }}</td>
                        </tr>
                    </table>

                </div>
                
                <div class="result-div" style="display: flex; justify-content: center; align-items: center; margin-top: 1rem;">
                    <p style="color: #000;"><strong>Your total earning from this round: </strong><span style="color: red;">{{ remaining_balance }} + {{ split }} - {{ payoff_1 }} + {{ payoff_2 }} =  {{ current_balance }} MUs</span></p>
                </div>
                <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 1rem 0;">
                    <span style="margin-bottom: 0.2rem; font-size: 16px; font-weight: bolder;">Next Round</span>
                    <span class="otree-timer__time-left" style="font-size: 25px; color: red;">00:15</span>
                </div>
            </div>
        </div>

    </div>
    <div id="footer">
        <p>&copy; 2024 Krises Maskey</p>
    </div>

{{ endblock }}

